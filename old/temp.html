<link rel="stylesheet" type="text/css" href="style.css"/>
<link rel="stylesheet" type="text/css" href="picker_style.css"/>
<link rel="stylesheet" type="text/css" href="helpers.css"/>
<link rel="stylesheet" type="text/css" href="top_icons.css"/>
<link rel="stylesheet" type="text/css" href="menu_icons.css"/>
<link rel="stylesheet" type="text/css" href="print.css" media="print"/>


<script type="text/javascript" src="view_model.js"></script>
<script type="text/javascript" src="color.js"></script>
<script type="text/javascript" src="picker.js"></script>

<script type="text/javascript" src="drawbox.js"></script>
<script type="text/javascript" src="../scripts/domHelper.js"></script>
<script type="text/javascript" src="file_functions.js"></script>


<!--<div id="top_icons_properties" class="popup-container"
     data-bind="with: TopIcons, visible: TopIcons().PropertiesVisible, style: { left: TopIcons().PropertiesWindowPosition().left, top: TopIcons().PropertiesWindowPosition().top }">
    <div class="popup-container-header popup-container-header-top">Customize Quick Access Toolbar</div>
    <div class="full-width" data-bind="foreach: Icons">
        <table cellspacing="0" cellpadding="0" class="common_button full-width">
            <tr data-bind="click: ChangeState">
                <td class="top-icon-customize-outer" style="width: 20px; height: 20px">
                    <div data-bind="css: Visible() == true ? 'top-icon-customize-checked' : ''">
                        <div data-bind="css: Visible() == true ? 'top-icon-customize-checked-inner' : ''">
                            <img src="img/check.png" data-bind="visible: Visible"/>
                        </div>
                    </div>
                </td>
                <td data-bind="text: Name"></td>
            </tr>
        </table>
    </div>
</div>-->

<div class="systemOuterBorder" style="position: absolute;">
<!-- System border -->
<div class="systemBorder">
<div class="systemBar" onmousedown="beginDrag(event, this)" onmouseup="endDrag()">
    <table class="full-width">
        <tr>
            <td>
                <table data-bind="with: TopIcons">
                    <tr>
                        <td class="top_icon systemAppIcon">&nbsp</td>

                        <td class="windows_separator"></td>

                        <!-- ko foreach: VisibleIcons -->
                        <td data-bind="css: Enabled ? 'common_button' : '', attr: { 'title' : Name() + ': ' + Description() }">
                            <div class="top_icon"
                                 data-bind="style: { 'background-position':  BackgroundStyle }, click: Action"></div>
                        </td>
                        <!-- /ko -->

                        <td id="top_icons_show_properties_btn" data-bind="click: ShowProperties" class="common_button">
                            <img src="../img/top_icon_show_properties.png"/>
                        </td>

                        <td class="windows_separator"></td>

                        <td style="font-size: 14px">Untitled - Paint</td>
                    </tr>
                </table>
            </td>

            <td>
                <div class="full-width">
                    <table align="right">
                        <tr>
                            <td>
                                <div id="minimize_button" class="system_button">&nbsp</div>
                            </td>
                            <td>
                                <div id="maximize_button" class="system_button">&nbsp</div>
                            </td>
                            <td>
                                <div id="close_button" class="system_button" data-bind="click: Exit">&nbsp</div>
                            </td>
                        </tr>
                    </table>
                </div>
            </td>
        </tr>
    </table>
</div>

<!-- Bottom statusbar -->
<div id="statusbar" data-bind="visible: StatusBarVisible">
    <div id="statusbar_inner">
        <table class="full-width">
            <tr>
                <td class="statusbar_icon"><img src="../img/statusbar_icons/position.png"/></td>
                <td id="statusbar_coords" class="statusbar_text"></td>

                <td class="statusbar_icon"><img src="../img/statusbar_icons/selection_size.png"/></td>
                <td class="statusbar_text">SelectionSize</td>

                <td class="statusbar_icon"><img src="../img/statusbar_icons/canvas_size.png"/></td>
                <td id="canvas_size_info" class="statusbar_text"></td>

                <td class="statusbar_icon"><img src="../img/statusbar_icons/file_size.png"/></td>
                <td class="statusbar_text">Size: 0KB</td>

                <td>
                    <div align="right">
                        <table style="margin: 0">
                            <tr>
                                <td>
                                    <div id="zoom_text_value">100%</div>
                                </td>

                                <td><img src="../img/statusbar_icons/zoom_out.png" data-bind="click: ZoomOut"/></td>

                                <td>
                                    <input id="zoom_value" type="range" value="100" min="25" max="800" step="25"
                                           style="width:100px; margin: 0;" onchange="raiseZoomChanged()"/>
                                </td>

                                <td><img src="../img/statusbar_icons/zoom_in.png" data-bind="click: ZoomIn"/></td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>

<!-- External blocks -->
<!-- Brush width block -->
<div id="brush_width_block"></div>

<!-- Rotate block -->
<div id="rotate_block">
    <table cellspacing="0">
        <tr>
            <td class="common_button" onclick="turnRight()">
                <table cellspacing="0">
                    <tr>
                        <td class="rotate_block_image"><img src="../img/rotate_icons/rotate_right.png"/></td>
                        <td class="rotate_block_text">Rotate right 90°</td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td class="common_button" onclick="turnLeft()">
                <table cellspacing="0">
                    <tr>
                        <td class="rotate_block_image"><img src="../img/rotate_icons/rotate_left.png"/></td>
                        <td class="rotate_block_text">Rotate left 90°</td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td class="common_button" onclick="rotate()">
                <table cellspacing="0">
                    <tr>
                        <td class="rotate_block_image"><img src="../img/rotate_icons/rotate_180.png"/></td>
                        <td class="rotate_block_text">Rotate 180°</td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td class="common_button" onclick="flipVertical()">
                <table cellspacing="0">
                    <tr>
                        <td class="rotate_block_image"><img src="../img/rotate_icons/flip_vertical.png"/></td>
                        <td class="rotate_block_text">Flip vertical</td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td class="common_button" onclick="flipHorizontal()">
                <table cellspacing="0">
                    <tr>
                        <td class="rotate_block_image"><img src="../img/rotate_icons/flip_horizontal.png"/></td>
                        <td class="rotate_block_text">Flip horizontal</td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>

<!-- Main menu -->
<div id="main_menu">
    <div id="main_menu_top">
        <table cellspacing="0">
            <tr>
                <td>
                    <div class="main_menu_button" onclick="hideMainMenu()" style="margin: -1px">&nbsp</div>
                </td>
                <td></td>
            </tr>
        </table>
    </div>
    <div>
        <table cellspacing="0" cellpadding="0" class="full-width">
            <tr>
                <td id="main_menu_icons">
                    <table class="full-width" cellspacing="0" cellpadding="0">
                        <tr>
                            <td colspan="3">
                                <div class="main_menu_item common_button" data-bind="click: New">
                                    <table style="height: 100%">
                                        <tr>
                                            <td class="menu-icon menu-icon-new">&nbsp</td>
                                            <td class="main_menu_item_text">New</td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3">
                                <div class="main_menu_item common_button" id="main_menu_open_image_button">
                                    <input type="file" class="trap_filepicker" data-bind="event: { change: Open }"
                                           id="image_file_picker" accept="image/*"/>
                                    <table style="height: 100%">
                                        <tr>
                                            <td class="menu-icon menu-icon-open">&nbsp</td>
                                            <td class="main_menu_item_text">Open</td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3">
                                <div class="main_menu_item common_button" data-bind="click: Save">
                                    <table style="height: 100%">
                                        <tr>
                                            <td class="menu-icon menu-icon-save">&nbsp</td>
                                            <td class="main_menu_item_text">Save</td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" class="main_menu_item_text main_menu_separator">
                                <div class="main_menu_item common_button" onclick="showSaveAdditionalWindow()">
                                    <table style="height: 100%">
                                        <tr>
                                            <td class="menu-icon menu-icon-save-as">&nbsp</td>
                                            <td class="main_menu_item_text">Save as</td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3">
                                <div class="main_menu_item common_button" data-bind="click: Print">
                                    <table style="height: 100%">
                                        <tr>
                                            <td class="menu-icon menu-icon-print">&nbsp</td>
                                            <td class="main_menu_item_text">Print</td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3">
                                <div class="main_menu_item">
                                    <table style="height: 100%">
                                        <tr>
                                            <td class="menu-icon menu-icon-from-scanner">&nbsp</td>
                                            <td class="main_menu_item_text" disabled="disabled">From scanner or camera
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" class="main_menu_item_text main_menu_separator">
                                <div class="main_menu_item">
                                    <table style="height: 100%">
                                        <tr>
                                            <td class="menu-icon menu-icon-send-mail">&nbsp</td>
                                            <td class="main_menu_item_text" disabled="disabled">Send e-mail</td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" class="main_menu_item_text main_menu_separator">
                                <div class="main_menu_item">
                                    <table style="height: 100%">
                                        <tr>
                                            <td class="menu-icon menu-icon-set-background">&nbsp</td>
                                            <td class="main_menu_item_text" disabled="disabled">Set as desktop
                                                background
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" class="main_menu_item_text main_menu_separator"
                                data-bind="click: ShowProperties">
                                <div class="main_menu_item common_button">
                                    <table style="height: 100%">
                                        <tr>
                                            <td class="menu-icon menu-icon-properties">&nbsp</td>
                                            <td class="main_menu_item_text">Properties</td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" class="main_menu_item_text main_menu_separator"
                                data-bind="click: ShowAbout">
                                <div class="main_menu_item common_button">
                                    <table style="height: 100%">
                                        <tr>
                                            <td class="menu-icon menu-icon-about">&nbsp</td>
                                            <td class="main_menu_item_text">About Paint</td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3">
                                <div class="main_menu_item common_button" data-bind="click: Exit">
                                    <table style="height: 100%">
                                        <tr>
                                            <td class="menu-icon menu-icon-exit">&nbsp</td>
                                            <td class="main_menu_item_text">Exit</td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                    </table>
                </td>
                <td style="vertical-align: top; background: #FFFFFF;">
                    <div id="recent_pictures_block">
                        <table id="recent_pictures_list">
                            <tr>
                                <td colspan="2" class="recent_image_item" id="recent_pictures_header">Recent pictures
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div id="main_menu_bottom">&nbsp</div>
</div>

<!-- Eraser cursor -->
<div id="eraser_cursor"></div>

<!-- SAVE AS ADDITIONAL WINDOW -->
<div class="main_menu_additional_window" style="display: none" id="save_as_additional_window">
    <div class="main_menu_item common_button" onclick="saveAsPng()">
        <table>
            <tr>
                <td><img src="../img/imagetype_icons/png.png"/></td>
                <td class="main_menu_additional_window_text"><b>PNG picture</b><br/>Save a photo or drawing with high
                    quality and use it on your computer or on the web.
                </td>
            </tr>
        </table>
    </div>

    <div class="main_menu_item common_button" onclick="saveAsJpeg()">
        <table>
            <tr>
                <td><img src="../img/imagetype_icons/jpg.png"/></td>
                <td class="main_menu_additional_window_text"><b>JPEG picture</b></br>Save a photo with good quality and
                    use it on your computer, in e-mail, or on the web.
                </td>
            </tr>
        </table>
    </div>

    <div class="main_menu_item common_button">
        <table>
            <tr>
                <td><img src="../img/imagetype_icons/bmp.png"/></td>
                <td class="main_menu_additional_window_text"><b>BMP picture</b><br/>Save any kind of picture with high
                    quality and use it on your computer.
                </td>
            </tr>
        </table>
    </div>

    <div class="main_menu_item common_button">
        <table>
            <tr>
                <td><img src="../img/imagetype_icons/gif.png"/></td>
                <td class="main_menu_additional_window_text"><b>GIF picture</b><br/>Save a simple drawing with lower
                    quality and use it in e-mail or on the web.
                </td>
            </tr>
        </table>
    </div>

    <div class="main_menu_item common_button">
        <table>
            <tr>
                <td><img src="../img/imagetype_icons/other.png"/></td>
                <td class="main_menu_additional_window_text"><b>Other formats</b><br/>Open the Save As dialog box to
                    select from all possible file types.
                </td>
            </tr>
        </table>
    </div>
</div>
</div>
</div>

<!-- Canvas resize window -->
<!-- Window Content -->
<div id="canvas_resize_window_content" style="display: none">
    <fieldset style="border-radius: 5px; -webkit-border-radius: 5px">
        <legend>Resize</legend>
        <div>
            By:<input type="radio" checked="true" name="change_size_by_radiobtn" value="1">Percentage</input><input
                type="radio" name="change_size_by_radiobtn" value="2">Pixels</input>
        </div>
        <table>
            <tr>
                <td><img src="../img/resize_pics/resize_horizontal.png"/></td>
                <td>Horizontal:</td>
                <td><input type="text" value="100" class="resizing_window_input"/></td>
            </tr>
            <tr>
                <td><img src="../img/resize_pics/resize_vertical.png"/></td>
                <td>Vertical:</td>
                <td><input type="text" value="100" class="resizing_window_input"/></td>
            </tr>
        </table>
        <div>
            <input type="checkbox"/>Maintain aspect ratio
        </div>
    </fieldset>
    <fieldset style="border-radius: 5px; -webkit-border-radius: 5px">
        <legend>Skew (degrees)</legend>
        <table>
            <tr>
                <td><img src="../img/resize_pics/skew_horizontal.png"/></td>
                <td>Horizontal:</td>
                <td><input type="text" value="100" class="resizing_window_input"/></td>
            </tr>
            <tr>
                <td><img src="../img/resize_pics/skew_vertical.png"/></td>
                <td>Vertical:</td>
                <td><input type="text" value="100" class="resizing_window_input"/></td>
            </tr>
        </table>
    </fieldset>

    <div align="right">
        <input type="button" value="OK" class="resize_window_button"/>
        <input type="button" value="Cancel" class="resize_window_button"/>
    </div>
</div>

<div id="about_window_content" style="background-color: #F0F0F0; display: none">
    Windows 7 Professional
    <hr/>

    <p>Javascript Paint
        Version 3.8 (Build 3838: ServicePack 1)
        Copyright ©</p>

    <p>The Windows 7 Professional operating system and its user interface are
        protected by trademark and other pending or existing intellectual property
        rights in the United States and other countries.</p>

    <p>This product is licensed under the GNU license to:<br/>
        everybody.</p>

    <input type="button" value="OK"/>
</div>

<div id="properties_window_content" style="background-color: #F0F0F0; display: none">
    <fieldset>
        <legend>File Attributes</legend>
    </fieldset>

    <fieldset>
        <legend>Units</legend>
    </fieldset>

    <fieldset>
        <legend>Colors</legend>
    </fieldset>

    <input type="text"/> <input type="text"/> <input type="button" value="Default"/><br/>
    <input type="button" value="OK"/><input type="button" value="Cancel"/>
</div>